specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
    - kind: ethereum
      name: MyDanPass
      network: goerli
      source:
        address: "${MYDANPASS_ADDRESS}"
        abi: MyDanPass
        startBlock: ${MYDANPASS_START_BLOCK}
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.7
        language: wasm/assemblyscript
        entities:
          - Profile
          - Protocol
        abis:
          - name: MyDanPass
            file: ./abis/MyDanPass.json
        eventHandlers:
          - event: Transfer(indexed address,indexed address,indexed uint256)
            handler: handleTransfer
        file: ./src/mydanpass.ts
    - kind: ethereum
      name: MyDanDefi
      network: goerli
      source:
        address: "${MYDANDEFI_PROXY_ADDRESS}"
        abi: MyDanDefi
        startBlock: ${MYDANDEFI_PROXY_START_BLOCK}
      mapping:
        kind: ethereum/events
        apiVersion: 0.0.7
        language: wasm/assemblyscript
        entities:
          - MembershipTier
          - Deposit
          - User
          - Profile
          - ReferralBonus
          - Duration
          - ReferralLevel
          - ProfileReferralLevelData
        abis:
          - name: MyDanDefi
            file: ./abis/MyDanDefi.json
        eventHandlers:
          - event: MembershipUpdated(uint256,(string,uint256,uint256,uint256,uint256,uint256))
            handler: handleMembershipUpdated
          - event: DurationBonusRateUpdated(uint256,uint256)
            handler: handleDurationBonusRateUpdated
          - event: MembershipInserted(uint256,(string,uint256,uint256,uint256,uint256,uint256))
            handler: handleMembershipInserted
          - event: ReferralBonusRateUpdated(uint256,uint256)
            handler: handleReferralBonusRateUpdated
          - event: PassMinted(address,uint256,uint256)
            handler: handlePassMinted
          - event: ReferralCodeCreated(string,uint256)
            handler: handleReferralCodeCreated
          - event: ReferralBonusCreated(uint256,uint256,uint256,uint256)
            handler: handleReferralBonusCreated
          - event: DepositCreated(uint256,uint256,uint256,uint256,uint256,uint256)
            handler: handleDepositCreated
          - event: MembershipTierChanged(uint256,uint256)
            handler: handleMembershipTierChanged
          - event: InterestClaimed(uint256,uint256,uint256)
            handler: handleInterestClaimed
          - event: ReferralBonusClaimed(uint256,uint256,uint256)
            handler: handleReferralBonusClaimed
          - event: ReferralBonusLevelCollectionActivated(uint256,uint256,uint256,uint256)
            handler: handleReferralBonusLevelCollectionActivated
          - event: ReferralBonusLevelCollectionDeactivated(uint256,uint256,uint256,uint256)
            handler: handleReferralBonusLevelCollectionDeactivated
          - event: DepositWithdrawn(uint256,uint256,uint256)
            handler: handleDepositWithdrawn

        file: ./src/mydandefi.ts
